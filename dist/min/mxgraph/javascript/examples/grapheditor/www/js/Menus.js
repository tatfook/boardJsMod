/* 2017-11-22 */
function Menubar(e,t){this.editorUi=e,this.container=t}function Menu(e,t){mxEventSource.call(this),this.funct=e,this.enabled=null==t||t}Menus=function(e){this.editorUi=e,this.menus=new Object,this.init(),mxClient.IS_SVG||((new Image).src=this.checkmarkImage)},Menus.prototype.defaultFont="Helvetica",Menus.prototype.defaultFontSize="12",Menus.prototype.defaultMenuItems=["file","edit","view","arrange","extras","help"],Menus.prototype.defaultFonts=["Helvetica","Verdana","Times New Roman","Garamond","Comic Sans MS","Courier New","Georgia","Lucida Console","Tahoma"],Menus.prototype.init=function(){var e=this.editorUi.editor.graph,t=mxUtils.bind(e,e.isEnabled);this.customFonts=[],this.customFontSizes=[],this.put("fontFamily",new Menu(mxUtils.bind(this,function(e,t){for(var n=mxUtils.bind(this,function(n){this.styleChange(e,n,[mxConstants.STYLE_FONTFAMILY],[n],null,t,function(){document.execCommand("fontname",!1,n)}).firstChild.nextSibling.style.fontFamily=n}),i=0;i<this.defaultFonts.length;i++)n(this.defaultFonts[i]);if(e.addSeparator(t),this.customFonts.length>0){for(i=0;i<this.customFonts.length;i++)n(this.customFonts[i]);e.addSeparator(t),e.addItem(mxResources.get("reset"),null,mxUtils.bind(this,function(){this.customFonts=[]}),t),e.addSeparator(t)}this.promptChange(e,mxResources.get("custom")+"...","",mxConstants.DEFAULT_FONTFAMILY,mxConstants.STYLE_FONTFAMILY,t,!0,mxUtils.bind(this,function(e){this.customFonts.push(e)}))}))),this.put("formatBlock",new Menu(mxUtils.bind(this,function(t,n){function i(i,o){return t.addItem(i,null,mxUtils.bind(this,function(){e.cellEditor.textarea.focus(),document.execCommand("formatBlock",!1,"<"+o+">")}),n)}i(mxResources.get("normal"),"p"),i("","h1").firstChild.nextSibling.innerHTML='<h1 style="margin:0px;">'+mxResources.get("heading")+" 1</h1>",i("","h2").firstChild.nextSibling.innerHTML='<h2 style="margin:0px;">'+mxResources.get("heading")+" 2</h2>",i("","h3").firstChild.nextSibling.innerHTML='<h3 style="margin:0px;">'+mxResources.get("heading")+" 3</h3>",i("","h4").firstChild.nextSibling.innerHTML='<h4 style="margin:0px;">'+mxResources.get("heading")+" 4</h4>",i("","h5").firstChild.nextSibling.innerHTML='<h5 style="margin:0px;">'+mxResources.get("heading")+" 5</h5>",i("","h6").firstChild.nextSibling.innerHTML='<h6 style="margin:0px;">'+mxResources.get("heading")+" 6</h6>",i("","pre").firstChild.nextSibling.innerHTML='<pre style="margin:0px;">'+mxResources.get("formatted")+"</pre>",i("","blockquote").firstChild.nextSibling.innerHTML='<blockquote style="margin-top:0px;margin-bottom:0px;">'+mxResources.get("blockquote")+"</blockquote>"}))),this.put("fontSize",new Menu(mxUtils.bind(this,function(t,n){for(var i=[6,8,9,10,11,12,14,18,24,36,48,72],o=mxUtils.bind(this,function(i){this.styleChange(t,i,[mxConstants.STYLE_FONTSIZE],[i],null,n,function(){document.execCommand("fontSize",!1,"3");for(var t=e.cellEditor.textarea.getElementsByTagName("font"),n=0;n<t.length;n++)if("3"==t[n].getAttribute("size")){t[n].removeAttribute("size"),t[n].style.fontSize=i+"px";break}})}),l=0;l<i.length;l++)o(i[l]);if(t.addSeparator(n),this.customFontSizes.length>0){for(l=0;l<this.customFontSizes.length;l++)o(this.customFontSizes[l]);t.addSeparator(n),t.addItem(mxResources.get("reset"),null,mxUtils.bind(this,function(){this.customFontSizes=[]}),n),t.addSeparator(n)}this.promptChange(t,mxResources.get("custom")+"...","(pt)","12",mxConstants.STYLE_FONTSIZE,n,!0,mxUtils.bind(this,function(e){this.customFontSizes.push(e)}))}))),this.put("direction",new Menu(mxUtils.bind(this,function(t,n){t.addItem(mxResources.get("flipH"),null,function(){e.toggleCellStyles(mxConstants.STYLE_FLIPH,!1)},n),t.addItem(mxResources.get("flipV"),null,function(){e.toggleCellStyles(mxConstants.STYLE_FLIPV,!1)},n),this.addMenuItems(t,["-","rotation"],n)}))),this.put("align",new Menu(mxUtils.bind(this,function(t,n){t.addItem(mxResources.get("leftAlign"),null,function(){e.alignCells(mxConstants.ALIGN_LEFT)},n),t.addItem(mxResources.get("center"),null,function(){e.alignCells(mxConstants.ALIGN_CENTER)},n),t.addItem(mxResources.get("rightAlign"),null,function(){e.alignCells(mxConstants.ALIGN_RIGHT)},n),t.addSeparator(n),t.addItem(mxResources.get("topAlign"),null,function(){e.alignCells(mxConstants.ALIGN_TOP)},n),t.addItem(mxResources.get("middle"),null,function(){e.alignCells(mxConstants.ALIGN_MIDDLE)},n),t.addItem(mxResources.get("bottomAlign"),null,function(){e.alignCells(mxConstants.ALIGN_BOTTOM)},n)}))),this.put("distribute",new Menu(mxUtils.bind(this,function(t,n){t.addItem(mxResources.get("horizontal"),null,function(){e.distributeCells(!0)},n),t.addItem(mxResources.get("vertical"),null,function(){e.distributeCells(!1)},n)}))),this.put("layout",new Menu(mxUtils.bind(this,function(t,n){var i=mxUtils.bind(this,function(e,t){var n=new FilenameDialog(this.editorUi,e,mxResources.get("apply"),function(e){t(parseFloat(e))},mxResources.get("spacing"));this.editorUi.showDialog(n.container,300,80,!0,!0),n.init()});t.addItem(mxResources.get("horizontalFlow"),null,mxUtils.bind(this,function(){var t=new mxHierarchicalLayout(e,mxConstants.DIRECTION_WEST);this.editorUi.executeLayout(function(){var n=e.getSelectionCells();t.execute(e.getDefaultParent(),0==n.length?null:n)},!0)}),n),t.addItem(mxResources.get("verticalFlow"),null,mxUtils.bind(this,function(){var t=new mxHierarchicalLayout(e,mxConstants.DIRECTION_NORTH);this.editorUi.executeLayout(function(){var n=e.getSelectionCells();t.execute(e.getDefaultParent(),0==n.length?null:n)},!0)}),n),t.addSeparator(n),t.addItem(mxResources.get("horizontalTree"),null,mxUtils.bind(this,function(){var t=e.getSelectionCell(),n=null;if(null==t||0==e.getModel().getChildCount(t)?0==e.getModel().getEdgeCount(t)&&(n=e.findTreeRoots(e.getDefaultParent())):n=e.findTreeRoots(t),null!=n&&n.length>0&&(t=n[0]),null!=t){var o=new mxCompactTreeLayout(e,!0);o.edgeRouting=!1,o.levelDistance=30,i(o.levelDistance,mxUtils.bind(this,function(n){o.levelDistance=n,this.editorUi.executeLayout(function(){o.execute(e.getDefaultParent(),t)},!0)}))}}),n),t.addItem(mxResources.get("verticalTree"),null,mxUtils.bind(this,function(){var t=e.getSelectionCell(),n=null;if(null==t||0==e.getModel().getChildCount(t)?0==e.getModel().getEdgeCount(t)&&(n=e.findTreeRoots(e.getDefaultParent())):n=e.findTreeRoots(t),null!=n&&n.length>0&&(t=n[0]),null!=t){var o=new mxCompactTreeLayout(e,!1);o.edgeRouting=!1,o.levelDistance=30,i(o.levelDistance,mxUtils.bind(this,function(n){o.levelDistance=n,this.editorUi.executeLayout(function(){o.execute(e.getDefaultParent(),t)},!0)}))}}),n),t.addItem(mxResources.get("radialTree"),null,mxUtils.bind(this,function(){var t=e.getSelectionCell(),n=null;if(null==t||0==e.getModel().getChildCount(t)?0==e.getModel().getEdgeCount(t)&&(n=e.findTreeRoots(e.getDefaultParent())):n=e.findTreeRoots(t),null!=n&&n.length>0&&(t=n[0]),null!=t){var o=new mxRadialTreeLayout(e,!1);o.levelDistance=80,o.autoRadius=!0,i(o.levelDistance,mxUtils.bind(this,function(n){o.levelDistance=n,this.editorUi.executeLayout(function(){o.execute(e.getDefaultParent(),t),e.isSelectionEmpty()||(t=e.getModel().getParent(t),e.getModel().isVertex(t)&&e.updateGroupBounds([t],2*e.gridSize,!0))},!0)}))}}),n),t.addSeparator(n),t.addItem(mxResources.get("organic"),null,mxUtils.bind(this,function(){var t=new mxFastOrganicLayout(e);i(t.forceConstant,mxUtils.bind(this,function(n){t.forceConstant=n,this.editorUi.executeLayout(function(){var n=e.getSelectionCell();null!=n&&0!=e.getModel().getChildCount(n)||(n=e.getDefaultParent()),t.execute(n),e.getModel().isVertex(n)&&e.updateGroupBounds([n],2*e.gridSize,!0)},!0)}))}),n),t.addItem(mxResources.get("circle"),null,mxUtils.bind(this,function(){var t=new mxCircleLayout(e);this.editorUi.executeLayout(function(){var n=e.getSelectionCell();null!=n&&0!=e.getModel().getChildCount(n)||(n=e.getDefaultParent()),t.execute(n),e.getModel().isVertex(n)&&e.updateGroupBounds([n],2*e.gridSize,!0)},!0)}),n)}))),this.put("navigation",new Menu(mxUtils.bind(this,function(e,t){this.addMenuItems(e,["home","-","exitGroup","enterGroup","-","expand","collapse","-","collapsible"],t)}))),this.put("arrange",new Menu(mxUtils.bind(this,function(e,t){this.addMenuItems(e,["toFront","toBack","-"],t),this.addSubmenu("direction",e,t),this.addMenuItems(e,["turn","-"],t),this.addSubmenu("align",e,t),this.addSubmenu("distribute",e,t),e.addSeparator(t),this.addSubmenu("navigation",e,t),this.addSubmenu("insert",e,t),this.addSubmenu("layout",e,t),this.addMenuItems(e,["-","group","ungroup","removeFromGroup","-","clearWaypoints","autosize"],t)}))).isEnabled=t,this.put("insert",new Menu(mxUtils.bind(this,function(e,t){this.addMenuItems(e,["insertLink","insertImage"],t)}))),this.put("view",new Menu(mxUtils.bind(this,function(e,t){this.addMenuItems(e,(null!=this.editorUi.format?["formatPanel"]:[]).concat(["outline","layers","-","pageView","pageScale","-","scrollbars","tooltips","-","grid","guides","-","connectionArrows","connectionPoints","-","resetView","zoomIn","zoomOut"],t))}))),this.put("viewPanels",new Menu(mxUtils.bind(this,function(e,t){null!=this.editorUi.format&&this.addMenuItems(e,["formatPanel"],t),this.addMenuItems(e,["outline","layers"],t)}))),this.put("viewZoom",new Menu(mxUtils.bind(this,function(t,n){this.addMenuItems(t,["resetView","-"],n);for(var i=[.25,.5,.75,1,1.25,1.5,2,3,4],o=0;o<i.length;o++)!function(i){t.addItem(100*i+"%",null,function(){e.zoomTo(i)},n)}(i[o]);this.addMenuItems(t,["-","fitWindow","fitPageWidth","fitPage","fitTwoPages","-","customZoom"],n)}))),this.put("file",new Menu(mxUtils.bind(this,function(e,t){this.addMenuItems(e,["new","open","-","save","saveAs","-","import","export","-","pageSetup","print"],t)}))),this.put("edit",new Menu(mxUtils.bind(this,function(e,t){this.addMenuItems(e,["undo","redo","-","cut","copy","paste","delete","-","duplicate","-","editData","editTooltip","editStyle","-","edit","-","editLink","openLink","-","selectVertices","selectEdges","selectAll","selectNone","-","lockUnlock"])}))),this.put("extras",new Menu(mxUtils.bind(this,function(e,t){this.addMenuItems(e,["copyConnect","collapseExpand","-","editDiagram"])}))),this.put("help",new Menu(mxUtils.bind(this,function(e,t){this.addMenuItems(e,["help","-","about"])})))},Menus.prototype.put=function(e,t){return this.menus[e]=t,t},Menus.prototype.get=function(e){return this.menus[e]},Menus.prototype.addSubmenu=function(e,t,n){var i=this.get(e).isEnabled();if(t.showDisabled||i){var o=t.addItem(mxResources.get(e),null,null,n,null,i);this.addMenu(e,t,o)}},Menus.prototype.addMenu=function(e,t,n){var i=this.get(e);null!=i&&(t.showDisabled||i.isEnabled())&&this.get(e).execute(t,n)},Menus.prototype.addInsertTableItem=function(e){function t(e,t){for(var n=["<table>"],i=0;i<e;i++){n.push("<tr>");for(var o=0;o<t;o++)n.push("<td><br></td>");n.push("</tr>")}return n.push("</table>"),n.join("")}function n(e,t,n){for(s=e.rows.length;s<t;s++)for(var i=e.insertRow(s),o=0;o<e.rows[0].cells.length;o++){r=i.insertCell(-1);mxClient.IS_QUIRKS&&(r.innerHTML=l)}for(var s=0;s<e.rows.length;s++)for(o=(i=e.rows[s]).cells.length;o<n;o++){var r=i.insertCell(-1);mxClient.IS_QUIRKS&&(r.innerHTML=l)}}var i=this.editorUi.editor.graph,o=e.addItem("",null,mxUtils.bind(this,function(e){var n=i.getParentByName(mxEvent.getSource(e),"TD");if(null!=n){for(var o=i.getParentByName(n,"TR"),l=i.cellEditor.textarea.getElementsByTagName("table"),s=[],r=0;r<l.length;r++)s.push(l[r]);i.container.focus(),i.pasteHtmlAtCaret(t(o.sectionRowIndex+1,n.cellIndex+1));var a=i.cellEditor.textarea.getElementsByTagName("table");if(a.length==s.length+1)for(r=a.length-1;r>=0;r--)if(0==r||a[r]!=s[r-1]){i.selectNode(a[r].rows[0].cells[0]);break}}})),l='<img src="'+mxClient.imageBasePath+'/transparent.gif" width="16" height="16"/>';o.firstChild.innerHTML="";var s=function(e,t){var n=document.createElement("table");n.setAttribute("border","1"),n.style.borderCollapse="collapse",mxClient.IS_QUIRKS||n.setAttribute("cellPadding","8");for(var i=0;i<e;i++)for(var o=n.insertRow(i),s=0;s<t;s++){var r=o.insertCell(-1);mxClient.IS_QUIRKS&&(r.innerHTML=l)}return n}(5,5);o.firstChild.appendChild(s);var r=document.createElement("div");r.style.padding="4px",r.style.fontSize=Menus.prototype.defaultFontSize+"px",r.innerHTML="1x1",o.firstChild.appendChild(r),mxEvent.addListener(s,"mouseover",function(e){var t=i.getParentByName(mxEvent.getSource(e),"TD");if(null!=t){var o=i.getParentByName(t,"TR");n(s,Math.min(20,o.sectionRowIndex+2),Math.min(20,t.cellIndex+2)),r.innerHTML=t.cellIndex+1+"x"+(o.sectionRowIndex+1);for(var l=0;l<s.rows.length;l++)for(var a=s.rows[l],u=0;u<a.cells.length;u++){var d=a.cells[u];l<=o.sectionRowIndex&&u<=t.cellIndex?d.style.backgroundColor="blue":d.style.backgroundColor="white"}mxEvent.consume(e)}})},Menus.prototype.edgeStyleChange=function(e,t,n,i,o,l,s){return e.addItem(t,null,mxUtils.bind(this,function(){var e=this.editorUi.editor.graph;e.stopEditing(!1),e.getModel().beginUpdate();try{for(var t=e.getSelectionCells(),o=[],l=0;l<t.length;l++){var r=t[l];if(e.getModel().isEdge(r)){if(s){var a=e.getCellGeometry(r);null!=a&&((a=a.clone()).points=null,e.getModel().setGeometry(r,a))}for(var u=0;u<n.length;u++)e.setCellStyles(n[u],i[u],[r]);o.push(r)}}this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",n,"values",i,"cells",o))}finally{e.getModel().endUpdate()}}),l,o)},Menus.prototype.styleChange=function(e,t,n,i,o,l,s){var r=this.createStyleChangeFunction(n,i);return e.addItem(t,null,mxUtils.bind(this,function(){var e=this.editorUi.editor.graph;null!=s&&e.cellEditor.isContentEditing()?s():r()}),l,o)},Menus.prototype.createStyleChangeFunction=function(e,t){return mxUtils.bind(this,function(){var n=this.editorUi.editor.graph;n.stopEditing(!1),n.getModel().beginUpdate();try{for(var i=0;i<e.length;i++)n.setCellStyles(e[i],t[i]);this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",e,"values",t,"cells",n.getSelectionCells()))}finally{n.getModel().endUpdate()}})},Menus.prototype.promptChange=function(e,t,n,i,o,l,s,r,a){return e.addItem(t,null,mxUtils.bind(this,function(){var e=this.editorUi.editor.graph,t=i,l=e.getView().getState(e.getSelectionCell());null!=l&&(t=l.style[o]||t);var s=new FilenameDialog(this.editorUi,t,mxResources.get("apply"),mxUtils.bind(this,function(t){if(null!=t&&t.length>0){e.getModel().beginUpdate();try{e.stopEditing(!1),e.setCellStyles(o,t)}finally{e.getModel().endUpdate()}null!=r&&r(t)}}),mxResources.get("enterValue")+(n.length>0?" "+n:""));this.editorUi.showDialog(s.container,300,80,!0,!0),s.init()}),l,a,s)},Menus.prototype.pickColor=function(e,t,n){var i=this.editorUi.editor.graph;if(null!=t&&i.cellEditor.isContentEditing()){var o=i.cellEditor.saveSelection(),l=new ColorDialog(this.editorUi,n||"000000",mxUtils.bind(this,function(e){i.cellEditor.restoreSelection(o),document.execCommand(t,!1,e!=mxConstants.NONE?e:"transparent")}),function(){i.cellEditor.restoreSelection(o)});this.editorUi.showDialog(l.container,220,430,!0,!0),l.init()}else{null==this.colorDialog&&(this.colorDialog=new ColorDialog(this.editorUi)),this.colorDialog.currentColorKey=e;var s=i.getView().getState(i.getSelectionCell()),r="none";null!=s&&(r=s.style[e]||r),"none"==r?(r="ffffff",this.colorDialog.picker.fromString("ffffff"),this.colorDialog.colorInput.value="none"):this.colorDialog.picker.fromString(r),this.editorUi.showDialog(this.colorDialog.container,220,430,!0,!0),this.colorDialog.init()}},Menus.prototype.toggleStyle=function(e,t){var n=this.editorUi.editor.graph,i=n.toggleCellStyles(e,t);this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[e],"values",[i],"cells",n.getSelectionCells()))},Menus.prototype.addMenuItem=function(e,t,n,i,o){var l=this.editorUi.actions.get(t);if(null!=l&&(e.showDisabled||l.isEnabled())&&l.visible){var s=e.addItem(l.label,null,function(){l.funct(i)},n,o,l.isEnabled());return l.toggleAction&&l.isSelected()&&e.addCheckmark(s,Editor.checkmarkImage),this.addShortcut(s,l),s}return null},Menus.prototype.addShortcut=function(e,t){if(null!=t.shortcut){var n=e.firstChild.nextSibling.nextSibling,i=document.createElement("span");i.style.color="gray",mxUtils.write(i,t.shortcut),n.appendChild(i)}},Menus.prototype.addMenuItems=function(e,t,n,i,o){for(var l=0;l<t.length;l++)"-"==t[l]?e.addSeparator(n):this.addMenuItem(e,t[l],n,i,null!=o?o[l]:null)},Menus.prototype.createPopupMenu=function(e,t,n){var i=this.editorUi.editor.graph;if(e.smartSeparators=!0,i.isSelectionEmpty()?this.addMenuItems(e,["undo","redo","-","pasteHere"],null,n):this.addMenuItems(e,["delete","-","cut","copy","-","duplicate"],null,n),i.isSelectionEmpty())this.addMenuItems(e,["-","selectVertices","selectEdges","-","selectAll"],null,n);else{1==i.getSelectionCount()&&this.addMenuItems(e,["setAsDefaultStyle"],null,n),e.addSeparator(),t=i.getSelectionCell();var o=i.view.getState(t);if(null!=o){var l=!1;if(this.addMenuItems(e,["toFront","toBack","-"],null,n),i.getModel().isEdge(t)&&"entityRelationEdgeStyle"!=mxUtils.getValue(o.style,mxConstants.STYLE_EDGE,null)&&"arrow"!=mxUtils.getValue(o.style,mxConstants.STYLE_SHAPE,null)){var s=i.selectionCellsHandler.getHandler(t),r=!1;if(s instanceof mxEdgeHandler&&null!=s.bends&&s.bends.length>2){var a=s.getHandleForEvent(i.updateMouseEvent(new mxMouseEvent(n))),u=this.editorUi.actions.get("removeWaypoint");u.handler=s,u.index=a,r=a>0&&a<s.bends.length-1}this.addMenuItems(e,["-",r?"removeWaypoint":"addWaypoint"],null,n);var d=i.getModel().getGeometry(t);l=null!=d&&null!=d.points&&d.points.length>0}1==i.getSelectionCount()&&(l||i.getModel().isVertex(t)&&i.getModel().getEdgeCount(t)>0)&&this.addMenuItems(e,["clearWaypoints"],null,n),i.getSelectionCount()>1?(e.addSeparator(),this.addMenuItems(e,["group"],null,n)):1==i.getSelectionCount()&&!i.getModel().isEdge(t)&&!i.isSwimlane(t)&&i.getModel().getChildCount(t)>0&&(e.addSeparator(),this.addMenuItems(e,["ungroup"],null,n)),1==i.getSelectionCount()&&(e.addSeparator(),this.addMenuItems(e,["edit","-","editData","editLink"],null,n),i.getModel().isVertex(t)&&null!=mxUtils.getValue(o.style,mxConstants.STYLE_IMAGE,null)&&(e.addSeparator(),this.addMenuItem(e,"image",null,n).firstChild.nextSibling.innerHTML=mxResources.get("editImage")+"..."))}}},Menus.prototype.createMenubar=function(e){for(var t=new Menubar(this.editorUi,e),n=this.defaultMenuItems,i=0;i<n.length;i++)mxUtils.bind(this,function(e){var o=t.addMenu(mxResources.get(n[i]),mxUtils.bind(this,function(){e.funct.apply(this,arguments)}));this.menuCreated(e,o)})(this.get(n[i]));return t},Menus.prototype.menuCreated=function(e,t){null!=t&&e.addListener("stateChanged",function(){t.enabled=e.enabled,e.enabled?(t.className="geItem",8==document.documentMode&&(t.style.color="")):(t.className="geItem mxDisabled",8==document.documentMode&&(t.style.color="#c3c3c3"))})},Menubar.prototype.hideMenu=function(){this.editorUi.hideCurrentMenu()},Menubar.prototype.addMenu=function(e,t){var n=document.createElement("a");return n.setAttribute("href","javascript:void(0);"),n.className="geItem",mxUtils.write(n,e),this.addMenuHandler(n,t),this.container.appendChild(n),n},Menubar.prototype.addMenuHandler=function(e,t){if(null!=t){var n=!0,i=mxUtils.bind(this,function(i){if(n&&null==e.enabled||e.enabled){this.editorUi.editor.graph.popupMenuHandler.hideMenu();var o=new mxPopupMenu(t);o.div.className+=" geMenubarMenu",o.smartSeparators=!0,o.showDisabled=!0,o.autoExpand=!0,o.hideMenu=mxUtils.bind(this,function(){mxPopupMenu.prototype.hideMenu.apply(o,arguments),this.editorUi.resetCurrentMenu(),o.destroy()});var l=mxUtils.getOffset(e);o.popup(l.x,l.y+e.offsetHeight,null,i),this.editorUi.setCurrentMenu(o,e)}mxEvent.consume(i)});mxEvent.addListener(e,"mousemove",mxUtils.bind(this,function(t){null!=this.editorUi.currentMenu&&this.editorUi.currentMenuElt!=e&&(this.editorUi.hideCurrentMenu(),i(t))})),mxEvent.addListener(e,"mousedown",mxUtils.bind(this,function(){n=this.currentElt!=e})),mxEvent.addListener(e,"click",mxUtils.bind(this,function(e){i(e),n=!0}))}},Menubar.prototype.destroy=function(){},mxUtils.extend(Menu,mxEventSource),Menu.prototype.isEnabled=function(){return this.enabled},Menu.prototype.setEnabled=function(e){this.enabled!=e&&(this.enabled=e,this.fireEvent(new mxEventObject("stateChanged")))},Menu.prototype.execute=function(e,t){this.funct(e,t)},EditorUi.prototype.createMenus=function(){return new Menus(this)};