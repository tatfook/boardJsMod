/* 2017-11-22 */
var OpenDialog=function(){var e=document.createElement("iframe");e.style.backgroundColor="transparent",e.allowTransparency="true",e.style.borderStyle="none",e.style.borderWidth="0px",e.style.overflow="hidden",e.frameBorder="0";var t=mxClient.IS_VML&&(null==document.documentMode||document.documentMode<8)?20:0;e.setAttribute("width",(Editor.useLocalStorage?640:320)+t+"px"),e.setAttribute("height",(Editor.useLocalStorage?480:220)+t+"px"),e.setAttribute("src",OPEN_FORM),this.container=e},ColorDialog=function(e,t,l,n){function i(){var e=a(0==ColorDialog.recentColors.length?["FFFFFF"]:ColorDialog.recentColors,11,"FFFFFF",!0);return e.style.marginBottom="8px",e}function a(e,t,l,n){t=null!=t?t:12;var a=document.createElement("table");a.style.borderCollapse="collapse",a.setAttribute("cellspacing","0"),a.style.marginBottom="20px",a.style.cellSpacing="0px";var d=document.createElement("tbody");a.appendChild(d);for(var c=e.length/t,u=0;u<c;u++){for(var p=document.createElement("tr"),m=0;m<t;m++)!function(e){var t=document.createElement("td");t.style.border="1px solid black",t.style.padding="0px",t.style.width="16px",t.style.height="16px",null==e&&(e=l),"none"==e?t.style.background="url('"+Dialog.prototype.noColorImage+"')":t.style.backgroundColor="#"+e,p.appendChild(t),null!=e&&(t.style.cursor="pointer",mxEvent.addListener(t,"click",function(){"none"==e?(r.fromString("ffffff"),o.value="none"):r.fromString(e)}))}(e[u*t+m]);d.appendChild(p)}if(n){var g=document.createElement("td");g.setAttribute("title",mxResources.get("reset")),g.style.border="1px solid black",g.style.padding="0px",g.style.width="16px",g.style.height="16px",g.style.backgroundImage="url('"+Dialog.prototype.closeImage+"')",g.style.backgroundPosition="center center",g.style.backgroundRepeat="no-repeat",g.style.cursor="pointer",p.appendChild(g),mxEvent.addListener(g,"click",function(){ColorDialog.resetRecentColors(),a.parentNode.replaceChild(i(),a)})}return s.appendChild(a),a}this.editorUi=e;var o=document.createElement("input");o.style.marginBottom="10px",o.style.width="216px",mxClient.IS_IE&&(o.style.marginTop="10px",document.body.appendChild(o)),this.init=function(){mxClient.IS_TOUCH||o.focus()};var r=new jscolor.color(o);r.pickerOnfocus=!1,r.showPicker();var d=document.createElement("div");jscolor.picker.box.style.position="relative",jscolor.picker.box.style.width="230px",jscolor.picker.box.style.height="100px",jscolor.picker.box.style.paddingBottom="10px",d.appendChild(jscolor.picker.box);var s=document.createElement("center");d.appendChild(o),mxUtils.br(d),i();var c=a(this.presetColors);c.style.marginBottom="8px",(c=a(this.defaultColors)).style.marginBottom="16px",d.appendChild(s);var u=document.createElement("div");u.style.textAlign="right",u.style.whiteSpace="nowrap";var p=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog(),null!=n&&n()});p.className="geBtn",e.editor.cancelFirst&&u.appendChild(p);var m=null!=l?l:this.createApplyFunction(),g=mxUtils.button(mxResources.get("apply"),function(){var t=o.value;ColorDialog.addRecentColor(t,12),"none"!=t&&"#"!=t.charAt(0)&&(t="#"+t),m(t),e.hideDialog()});g.className="geBtn gePrimaryBtn",u.appendChild(g),e.editor.cancelFirst||u.appendChild(p),null!=t&&("none"==t?(r.fromString("ffffff"),o.value="none"):r.fromString(t)),d.appendChild(u),this.picker=r,this.colorInput=o,mxEvent.addListener(d,"keydown",function(t){27==t.keyCode&&(e.hideDialog(),null!=n&&n(),mxEvent.consume(t))}),this.container=d};ColorDialog.prototype.presetColors=["E6D0DE","CDA2BE","B5739D","E1D5E7","C3ABD0","A680B8","D4E1F5","A9C4EB","7EA6E0","D5E8D4","9AC7BF","67AB9F","D5E8D4","B9E0A5","97D077","FFF2CC","FFE599","FFD966","FFF4C3","FFCE9F","FFB570","F8CECC","F19C99","EA6B66"],ColorDialog.prototype.defaultColors=["none","FFFFFF","E6E6E6","CCCCCC","B3B3B3","999999","808080","666666","4D4D4D","333333","1A1A1A","000000","FFCCCC","FFE6CC","FFFFCC","E6FFCC","CCFFCC","CCFFE6","CCFFFF","CCE5FF","CCCCFF","E5CCFF","FFCCFF","FFCCE6","FF9999","FFCC99","FFFF99","CCFF99","99FF99","99FFCC","99FFFF","99CCFF","9999FF","CC99FF","FF99FF","FF99CC","FF6666","FFB366","FFFF66","B3FF66","66FF66","66FFB3","66FFFF","66B2FF","6666FF","B266FF","FF66FF","FF66B3","FF3333","FF9933","FFFF33","99FF33","33FF33","33FF99","33FFFF","3399FF","3333FF","9933FF","FF33FF","FF3399","FF0000","FF8000","FFFF00","80FF00","00FF00","00FF80","00FFFF","007FFF","0000FF","7F00FF","FF00FF","FF0080","CC0000","CC6600","CCCC00","66CC00","00CC00","00CC66","00CCCC","0066CC","0000CC","6600CC","CC00CC","CC0066","990000","994C00","999900","4D9900","009900","00994D","009999","004C99","000099","4C0099","990099","99004D","660000","663300","666600","336600","006600","006633","006666","003366","000066","330066","660066","660033","330000","331A00","333300","1A3300","003300","00331A","003333","001933","000033","190033","330033","33001A"],ColorDialog.prototype.createApplyFunction=function(){return mxUtils.bind(this,function(e){var t=this.editorUi.editor.graph;t.getModel().beginUpdate();try{t.setCellStyles(this.currentColorKey,e),this.editorUi.fireEvent(new mxEventObject("styleChanged","keys",[this.currentColorKey],"values",[e],"cells",t.getSelectionCells()))}finally{t.getModel().endUpdate()}})},ColorDialog.recentColors=[],ColorDialog.addRecentColor=function(e,t){null!=e&&(mxUtils.remove(e,ColorDialog.recentColors),ColorDialog.recentColors.splice(0,0,e),ColorDialog.recentColors.length>=t&&ColorDialog.recentColors.pop())},ColorDialog.resetRecentColors=function(){ColorDialog.recentColors=[]};var AboutDialog=function(e){var t=document.createElement("div");t.setAttribute("align","center");var l=document.createElement("h3");mxUtils.write(l,mxResources.get("about")+" GraphEditor"),t.appendChild(l);var n=document.createElement("img");n.style.border="0px",n.setAttribute("width","176"),n.setAttribute("width","151"),n.setAttribute("src",IMAGE_PATH+"/logo.png"),t.appendChild(n),mxUtils.br(t),mxUtils.write(t,"Powered by mxGraph "+mxClient.VERSION),mxUtils.br(t);var i=document.createElement("a");i.setAttribute("href","http://www.jgraph.com/"),i.setAttribute("target","_blank"),mxUtils.write(i,"www.jgraph.com"),t.appendChild(i),mxUtils.br(t),mxUtils.br(t);var a=mxUtils.button(mxResources.get("close"),function(){e.hideDialog()});a.className="geBtn gePrimaryBtn",t.appendChild(a),this.container=t},FilenameDialog=function(e,t,l,n,i,a,o,r,d,s){d=null==d||d;var c,u,p=document.createElement("table"),m=document.createElement("tbody");p.style.marginTop="8px",c=document.createElement("tr"),(u=document.createElement("td")).style.whiteSpace="nowrap",u.style.fontSize="10pt",u.style.width="120px",mxUtils.write(u,(i||mxResources.get("filename"))+":"),c.appendChild(u);var g=document.createElement("input");g.setAttribute("value",t||""),g.style.marginLeft="4px",g.style.width="180px";var h=mxUtils.button(l,function(){(null==a||a(g.value))&&(d&&e.hideDialog(),n(g.value))});h.className="geBtn gePrimaryBtn",this.init=function(){if((null!=i||null==o)&&(g.focus(),mxClient.IS_FF||document.documentMode>=5||mxClient.IS_QUIRKS?g.select():document.execCommand("selectAll",!1,null),Graph.fileSupport)){var t=p.parentNode,l=(e.editor.graph,null);mxEvent.addListener(t,"dragleave",function(e){null!=l&&(l.style.backgroundColor="",l=null),e.stopPropagation(),e.preventDefault()}),mxEvent.addListener(t,"dragover",mxUtils.bind(this,function(e){null==l&&(!mxClient.IS_IE||document.documentMode>10)&&((l=g).style.backgroundColor="#ebf2f9"),e.stopPropagation(),e.preventDefault()})),mxEvent.addListener(t,"drop",mxUtils.bind(this,function(e){null!=l&&(l.style.backgroundColor="",l=null),mxUtils.indexOf(e.dataTransfer.types,"text/uri-list")>=0&&(g.value=decodeURIComponent(e.dataTransfer.getData("text/uri-list")),h.click()),e.stopPropagation(),e.preventDefault()}))}},(u=document.createElement("td")).appendChild(g),c.appendChild(u),null==i&&null!=o||m.appendChild(c),null!=o&&(c=document.createElement("tr"),(u=document.createElement("td")).colSpan=2,u.appendChild(o),c.appendChild(u),m.appendChild(c)),c=document.createElement("tr"),(u=document.createElement("td")).colSpan=2,u.style.paddingTop="20px",u.style.whiteSpace="nowrap",u.setAttribute("align","right");var x=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog(),null!=s&&s()});if(x.className="geBtn",e.editor.cancelFirst&&u.appendChild(x),null!=r){var v=mxUtils.button(mxResources.get("help"),function(){window.open(r)});v.className="geBtn",u.appendChild(v)}mxEvent.addListener(g,"keypress",function(e){13==e.keyCode&&h.click()}),u.appendChild(h),e.editor.cancelFirst||u.appendChild(x),c.appendChild(u),m.appendChild(c),p.appendChild(m),this.container=p},TextareaDialog=function(e,t,l,n,i,a,o,r,d,s,c,u){o=null!=o?o:300,r=null!=r?r:120,s=null!=s&&s;var p,m,g=document.createElement("table"),h=document.createElement("tbody");p=document.createElement("tr"),(m=document.createElement("td")).style.fontSize="10pt",m.style.width="100px",mxUtils.write(m,t),p.appendChild(m),h.appendChild(p),p=document.createElement("tr"),m=document.createElement("td");var x=document.createElement("textarea");c&&x.setAttribute("wrap","off"),x.setAttribute("spellcheck","false"),x.setAttribute("autocorrect","off"),x.setAttribute("autocomplete","off"),x.setAttribute("autocapitalize","off"),mxUtils.write(x,l||""),x.style.resize="none",x.style.width=o+"px",x.style.height=r+"px",this.textarea=x,this.init=function(){x.focus(),x.scrollTop=0},m.appendChild(x),p.appendChild(m),h.appendChild(p),p=document.createElement("tr"),(m=document.createElement("td")).style.paddingTop="14px",m.style.whiteSpace="nowrap",m.setAttribute("align","right");var v=mxUtils.button(a||mxResources.get("cancel"),function(){e.hideDialog(),null!=i&&i()});if(v.className="geBtn",e.editor.cancelFirst&&m.appendChild(v),null!=d&&d(m),null!=n){var C=mxUtils.button(u||mxResources.get("apply"),function(){s||e.hideDialog(),n(x.value)});C.className="geBtn gePrimaryBtn",m.appendChild(C)}e.editor.cancelFirst||m.appendChild(v),p.appendChild(m),h.appendChild(p),g.appendChild(h),this.container=g},EditDiagramDialog=function(e){var t=document.createElement("div");t.style.textAlign="right";var l=document.createElement("textarea");l.setAttribute("wrap","off"),l.setAttribute("spellcheck","false"),l.setAttribute("autocorrect","off"),l.setAttribute("autocomplete","off"),l.setAttribute("autocapitalize","off"),l.style.overflow="auto",l.style.resize="none",l.style.width="600px",l.style.height="370px",l.style.marginBottom="16px",l.value=mxUtils.getPrettyXml(e.editor.getGraphXml()),t.appendChild(l),this.init=function(){l.focus()},Graph.fileSupport&&(l.addEventListener("dragover",function(e){e.stopPropagation(),e.preventDefault()},!1),l.addEventListener("drop",function(t){if(t.stopPropagation(),t.preventDefault(),t.dataTransfer.files.length>0){var n=t.dataTransfer.files[0],i=new FileReader;i.onload=function(e){l.value=e.target.result},i.readAsText(n)}else l.value=e.extractGraphModelFromEvent(t)},!1));var n=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog()});n.className="geBtn",e.editor.cancelFirst&&t.appendChild(n);var i=document.createElement("select");if(i.style.width="180px",i.className="geBtn",e.editor.graph.isEnabled()){var a=document.createElement("option");a.setAttribute("value","replace"),mxUtils.write(a,mxResources.get("replaceExistingDrawing")),i.appendChild(a)}var o=document.createElement("option");if(o.setAttribute("value","new"),mxUtils.write(o,mxResources.get("openInNewWindow")),EditDiagramDialog.showNewWindowOption&&i.appendChild(o),e.editor.graph.isEnabled()){var r=document.createElement("option");r.setAttribute("value","import"),mxUtils.write(r,mxResources.get("addToExistingDrawing")),i.appendChild(r)}t.appendChild(i);var d=mxUtils.button(mxResources.get("ok"),function(){var t=e.editor.graph.zapGremlins(mxUtils.trim(l.value)),n=null;if("new"==i.value)window.openFile=new OpenFile(function(){e.hideDialog(),window.openFile=null}),window.openFile.setData(t,null),window.open(e.getUrl());else if("replace"==i.value){e.editor.graph.model.beginUpdate();try{e.editor.setGraphXml(mxUtils.parseXml(t).documentElement),e.hideDialog()}catch(e){n=e}finally{e.editor.graph.model.endUpdate()}}else if("import"==i.value){e.editor.graph.model.beginUpdate();try{var a=mxUtils.parseXml(t),o=new mxGraphModel;new mxCodec(a).decode(a.documentElement,o);var r=o.getChildren(o.getChildAt(o.getRoot(),0));e.editor.graph.setSelectionCells(e.editor.graph.importCells(r)),e.hideDialog()}catch(e){n=e}finally{e.editor.graph.model.endUpdate()}}null!=n&&mxUtils.alert(n.message)});d.className="geBtn gePrimaryBtn",t.appendChild(d),e.editor.cancelFirst||t.appendChild(n),this.container=t};EditDiagramDialog.showNewWindowOption=!0;var ExportDialog=function(e){function t(){var e=p.value,t=e.lastIndexOf(".");p.value=t>0?e.substring(0,t+1)+m.value:e+"."+m.value,"xml"===m.value?(y.setAttribute("disabled","true"),f.setAttribute("disabled","true"),E.setAttribute("disabled","true"),F.setAttribute("disabled","true")):(y.removeAttribute("disabled"),f.removeAttribute("disabled"),E.removeAttribute("disabled"),F.removeAttribute("disabled")),"png"===m.value||"svg"===m.value?w.removeAttribute("disabled"):w.setAttribute("disabled","disabled")}function l(){f.value*E.value>MAX_AREA||f.value<=0?f.style.backgroundColor="red":f.style.backgroundColor="",f.value*E.value>MAX_AREA||E.value<=0?E.style.backgroundColor="red":E.style.backgroundColor=""}var n,i,a=e.editor.graph,o=a.getGraphBounds(),r=a.view.scale,d=Math.ceil(o.width/r),s=Math.ceil(o.height/r),c=document.createElement("table"),u=document.createElement("tbody");c.setAttribute("cellpadding",mxClient.IS_SF?"0":"2"),n=document.createElement("tr"),(i=document.createElement("td")).style.fontSize="10pt",i.style.width="100px",mxUtils.write(i,mxResources.get("filename")+":"),n.appendChild(i);var p=document.createElement("input");p.setAttribute("value",e.editor.getOrCreateFilename()),p.style.width="180px",(i=document.createElement("td")).appendChild(p),n.appendChild(i),u.appendChild(n),n=document.createElement("tr"),(i=document.createElement("td")).style.fontSize="10pt",mxUtils.write(i,mxResources.get("format")+":"),n.appendChild(i);var m=document.createElement("select");m.style.width="180px";var g=document.createElement("option");g.setAttribute("value","png"),mxUtils.write(g,mxResources.get("formatPng")),m.appendChild(g);var h=document.createElement("option");ExportDialog.showGifOption&&(h.setAttribute("value","gif"),mxUtils.write(h,mxResources.get("formatGif")),m.appendChild(h));var x=document.createElement("option");x.setAttribute("value","jpg"),mxUtils.write(x,mxResources.get("formatJpg")),m.appendChild(x);var v=document.createElement("option");v.setAttribute("value","pdf"),mxUtils.write(v,mxResources.get("formatPdf")),m.appendChild(v);var C=document.createElement("option");if(C.setAttribute("value","svg"),mxUtils.write(C,mxResources.get("formatSvg")),m.appendChild(C),ExportDialog.showXmlOption){var b=document.createElement("option");b.setAttribute("value","xml"),mxUtils.write(b,mxResources.get("formatXml")),m.appendChild(b)}(i=document.createElement("td")).appendChild(m),n.appendChild(i),u.appendChild(n),n=document.createElement("tr"),(i=document.createElement("td")).style.fontSize="10pt",mxUtils.write(i,mxResources.get("zoom")+" (%):"),n.appendChild(i);var y=document.createElement("input");y.setAttribute("type","number"),y.setAttribute("value","100"),y.style.width="180px",(i=document.createElement("td")).appendChild(y),n.appendChild(i),u.appendChild(n),n=document.createElement("tr"),(i=document.createElement("td")).style.fontSize="10pt",mxUtils.write(i,mxResources.get("width")+":"),n.appendChild(i);var f=document.createElement("input");f.setAttribute("value",d),f.style.width="180px",(i=document.createElement("td")).appendChild(f),n.appendChild(i),u.appendChild(n),n=document.createElement("tr"),(i=document.createElement("td")).style.fontSize="10pt",mxUtils.write(i,mxResources.get("height")+":"),n.appendChild(i);var E=document.createElement("input");E.setAttribute("value",s),E.style.width="180px",(i=document.createElement("td")).appendChild(E),n.appendChild(i),u.appendChild(n),n=document.createElement("tr"),(i=document.createElement("td")).style.fontSize="10pt",mxUtils.write(i,mxResources.get("background")+":"),n.appendChild(i);var w=document.createElement("input");w.setAttribute("type","checkbox"),w.checked=null==a.background||a.background==mxConstants.NONE,(i=document.createElement("td")).appendChild(w),mxUtils.write(i,mxResources.get("transparent")),n.appendChild(i),u.appendChild(n),n=document.createElement("tr"),(i=document.createElement("td")).style.fontSize="10pt",mxUtils.write(i,mxResources.get("borderWidth")+":"),n.appendChild(i);var F=document.createElement("input");F.setAttribute("type","number"),F.setAttribute("value",ExportDialog.lastBorderValue),F.style.width="180px",(i=document.createElement("td")).appendChild(F),n.appendChild(i),u.appendChild(n),c.appendChild(u),mxEvent.addListener(m,"change",t),t(),mxEvent.addListener(y,"change",function(){var e=Math.max(0,parseFloat(y.value)||100)/100;y.value=parseFloat((100*e).toFixed(2)),d>0?(f.value=Math.floor(d*e),E.value=Math.floor(s*e)):(y.value="100",f.value=d,E.value=s),l()}),mxEvent.addListener(f,"change",function(){var e=parseInt(f.value)/d;e>0?(y.value=parseFloat((100*e).toFixed(2)),E.value=Math.floor(s*e)):(y.value="100",f.value=d,E.value=s),l()}),mxEvent.addListener(E,"change",function(){var e=parseInt(E.value)/s;e>0?(y.value=parseFloat((100*e).toFixed(2)),f.value=Math.floor(d*e)):(y.value="100",f.value=d,E.value=s),l()}),n=document.createElement("tr"),(i=document.createElement("td")).setAttribute("align","right"),i.style.paddingTop="22px",i.colSpan=2;var A=mxUtils.button(mxResources.get("export"),mxUtils.bind(this,function(){if(parseInt(y.value)<=0)mxUtils.alert(mxResources.get("drawingEmpty"));else{var t=p.value,l=m.value,n=Math.max(0,parseFloat(y.value)||100)/100,i=Math.max(0,parseInt(F.value)),o=a.background;"svg"!=l&&"png"!=l||!w.checked?null!=o&&o!=mxConstants.NONE||(o="#ffffff"):o=null,ExportDialog.lastBorderValue=i,ExportDialog.exportFile(e,t,l,o,n,i)}}));A.className="geBtn gePrimaryBtn";var k=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog()});k.className="geBtn",e.editor.cancelFirst?(i.appendChild(k),i.appendChild(A)):(i.appendChild(A),i.appendChild(k)),n.appendChild(i),u.appendChild(n),c.appendChild(u),this.container=c};ExportDialog.lastBorderValue=0,ExportDialog.showGifOption=!0,ExportDialog.showXmlOption=!0,ExportDialog.exportFile=function(e,t,l,n,i,a){var o=e.editor.graph;if("xml"==l)ExportDialog.saveLocalFile(e,mxUtils.getXml(e.editor.getGraphXml()),t,l);else if("svg"==l)ExportDialog.saveLocalFile(e,mxUtils.getXml(o.getSvg(n,i,a)),t,l);else{var r=o.getGraphBounds(),d=mxUtils.createXmlDocument(),s=d.createElement("output");d.appendChild(s);var c=new mxXmlCanvas2D(s);c.translate(Math.floor((a/i-r.x)/o.view.scale),Math.floor((a/i-r.y)/o.view.scale)),c.scale(i/o.view.scale),(new mxImageExport).drawState(o.getView().getState(o.model.root),c);var u="xml="+encodeURIComponent(mxUtils.getXml(s)),p=Math.ceil(r.width*i/o.view.scale+2*a),m=Math.ceil(r.height*i/o.view.scale+2*a);u.length<=MAX_REQUEST_SIZE&&p*m<MAX_AREA?(e.hideDialog(),new mxXmlRequest(EXPORT_URL,"format="+l+"&filename="+encodeURIComponent(t)+"&bg="+(null!=n?n:"none")+"&w="+p+"&h="+m+"&"+u).simulate(document,"_blank")):mxUtils.alert(mxResources.get("drawingTooLarge"))}},ExportDialog.saveLocalFile=function(e,t,l,n){t.length<MAX_REQUEST_SIZE?(e.hideDialog(),new mxXmlRequest(SAVE_URL,"xml="+encodeURIComponent(t)+"&filename="+encodeURIComponent(l)+"&format="+n).simulate(document,"_blank")):(mxUtils.alert(mxResources.get("drawingTooLarge")),mxUtils.popup(xml))};var EditDataDialog=function(e,t){function l(){x.value.length>0?v.removeAttribute("disabled"):v.setAttribute("disabled","disabled")}var n=document.createElement("div"),i=e.editor.graph;n.style.height="310px",n.style.overflow="auto";var a=i.getModel().getValue(t);if(!mxUtils.isNode(a)){var o=mxUtils.createXmlDocument().createElement("object");o.setAttribute("label",a||""),a=o}var r=new mxForm("properties");r.table.style.width="100%",r.table.style.paddingRight="20px";for(var d=a.attributes,s=[],c=[],u=0,p=function(e,t){e.parentNode.style.marginRight="12px";var l=document.createElement("a"),n=mxUtils.createImage(Dialog.prototype.closeImage);n.style.height="9px",n.style.fontSize="9px",n.style.marginBottom=mxClient.IS_IE11?"-1px":"5px",l.className="geButton",l.setAttribute("title",mxResources.get("delete")),l.style.margin="0px",l.style.width="14px",l.style.height="14px",l.style.fontSize="14px",l.style.cursor="pointer",l.style.marginLeft="6px",l.appendChild(n);var i=function(e){return function(){for(var t=0,l=0;l<s.length;l++){if(s[l]==e){c[l]=null,r.table.deleteRow(t);break}null!=c[l]&&t++}}}(t);mxEvent.addListener(l,"click",i),e.parentNode.style.whiteSpace="nowrap",e.parentNode.appendChild(l)},m=[],g=0;g<d.length;g++)"label"!=d[g].nodeName&&"placeholders"!=d[g].nodeName&&m.push({name:d[g].nodeName,value:d[g].nodeValue});m.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0});for(g=0;g<m.length;g++)!function(e,t,l){s[e]=t,c[e]=r.addTextarea(s[u]+":",l,2),c[e].style.width="100%",p(c[e],t)}(u,m[g].name,m[g].value),u++;n.appendChild(r.table);var h=document.createElement("div");h.style.whiteSpace="nowrap",h.style.marginTop="6px";var x=document.createElement("input");x.setAttribute("placeholder",mxResources.get("enterPropertyName")),x.setAttribute("type","text"),x.setAttribute("size",mxClient.IS_IE||mxClient.IS_IE11?"18":"22"),x.style.marginLeft="2px",h.appendChild(x),n.appendChild(h);var v=mxUtils.button(mxResources.get("addProperty"),function(){var e=x.value;if(e.length>0&&"label"!=e&&"placeholders"!=e&&e.indexOf(":")<0)try{var t=mxUtils.indexOf(s,e);if(t>=0&&null!=c[t])c[t].focus();else{a.cloneNode(!1).setAttribute(e,""),t>=0&&(s.splice(t,1),c.splice(t,1)),s.push(e);var l=r.addTextarea(e+":","",2);l.style.width="100%",c.push(l),p(l,e),l.focus()}x.value=""}catch(e){mxUtils.alert(e)}else mxUtils.alert(mxResources.get("invalidName"))});this.init=function(){c.length>0?c[0].focus():x.focus()},v.setAttribute("disabled","disabled"),v.style.marginLeft="10px",v.style.width="144px",h.appendChild(v);var C=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog.apply(e,arguments)});C.className="geBtn";var b=mxUtils.button(mxResources.get("apply"),function(){try{e.hideDialog.apply(e,arguments),a=a.cloneNode(!0);for(var l=!1,n=0;n<s.length;n++)null==c[n]?a.removeAttribute(s[n]):(a.setAttribute(s[n],c[n].value),l=l||"placeholder"==s[n]&&"1"==a.getAttribute("placeholders"));l&&a.removeAttribute("label"),i.getModel().setValue(t,a)}catch(e){mxUtils.alert(e)}});b.className="geBtn gePrimaryBtn",mxEvent.addListener(x,"keyup",l),mxEvent.addListener(x,"change",l);var y=document.createElement("div");if(y.style.marginTop="18px",y.style.textAlign="right",e.editor.graph.getModel().isVertex(t)||e.editor.graph.getModel().isEdge(t)){var f=document.createElement("span");f.style.marginRight="10px";var E=document.createElement("input");if(E.setAttribute("type","checkbox"),E.style.marginRight="6px","1"==a.getAttribute("placeholders")&&(E.setAttribute("checked","checked"),E.defaultChecked=!0),mxEvent.addListener(E,"click",function(){"1"==a.getAttribute("placeholders")?a.removeAttribute("placeholders"):a.setAttribute("placeholders","1")}),f.appendChild(E),mxUtils.write(f,mxResources.get("placeholders")),null!=EditDataDialog.placeholderHelpLink){var w=document.createElement("a");w.setAttribute("href",EditDataDialog.placeholderHelpLink),w.setAttribute("title",mxResources.get("help")),w.setAttribute("target","_blank"),w.style.marginLeft="10px",w.style.cursor="help";var F=document.createElement("img");F.setAttribute("border","0"),F.setAttribute("valign","middle"),F.style.marginTop=mxClient.IS_IE11?"0px":"-4px",F.setAttribute("src",Editor.helpImage),w.appendChild(F),f.appendChild(w)}y.appendChild(f)}e.editor.cancelFirst?(y.appendChild(C),y.appendChild(b)):(y.appendChild(b),y.appendChild(C)),n.appendChild(y),this.container=n};EditDataDialog.placeholderHelpLink=null;var LinkDialog=function(e,t,l,n){var i=document.createElement("div");mxUtils.write(i,mxResources.get("editLink")+":");var a=document.createElement("div");a.className="geTitle",a.style.backgroundColor="transparent",a.style.borderColor="transparent",a.style.whiteSpace="nowrap",a.style.textOverflow="clip",a.style.cursor="default",mxClient.IS_VML||(a.style.paddingRight="20px");var o=document.createElement("input");o.setAttribute("value",t),o.setAttribute("placeholder","http://www.example.com/"),o.setAttribute("type","text"),o.style.marginTop="6px",o.style.width="400px",o.style.backgroundImage="url('"+Dialog.prototype.clearImage+"')",o.style.backgroundRepeat="no-repeat",o.style.backgroundPosition="100% 50%",o.style.paddingRight="14px";var r=document.createElement("div");r.setAttribute("title",mxResources.get("reset")),r.style.position="relative",r.style.left="-16px",r.style.width="12px",r.style.height="14px",r.style.cursor="pointer",r.style.display=mxClient.IS_VML?"inline":"inline-block",r.style.top=(mxClient.IS_VML?0:3)+"px",r.style.background="url("+IMAGE_PATH+"/transparent.gif)",mxEvent.addListener(r,"click",function(){o.value="",o.focus()}),a.appendChild(o),a.appendChild(r),i.appendChild(a),this.init=function(){o.focus(),mxClient.IS_FF||document.documentMode>=5||mxClient.IS_QUIRKS?o.select():document.execCommand("selectAll",!1,null)};var d=document.createElement("div");d.style.marginTop="18px",d.style.textAlign="right",mxEvent.addListener(o,"keypress",function(t){13==t.keyCode&&(e.hideDialog(),n(o.value))});var s=mxUtils.button(mxResources.get("cancel"),function(){e.hideDialog()});s.className="geBtn",e.editor.cancelFirst&&d.appendChild(s);var c=mxUtils.button(l,function(){e.hideDialog(),n(o.value)});c.className="geBtn gePrimaryBtn",d.appendChild(c),e.editor.cancelFirst||d.appendChild(s),i.appendChild(d),this.container=i},OutlineWindow=function(e,t,l,n,i){function a(){d.outline.pageScale=o.pageScale,d.outline.pageFormat=o.pageFormat,d.outline.pageVisible=o.pageVisible,d.outline.background=o.background;var e=mxUtils.getCurrentStyle(o.container);r.style.backgroundColor=e.backgroundColor,null!=o.view.backgroundPageShape&&null!=d.outline.view.backgroundPageShape&&(d.outline.view.backgroundPageShape.fill=o.view.backgroundPageShape.fill),d.outline.refresh()}var o=e.editor.graph,r=document.createElement("div");r.style.position="absolute",r.style.width="100%",r.style.height="100%",r.style.border="1px solid whiteSmoke",r.style.overflow="hidden",this.window=new mxWindow(mxResources.get("outline"),r,t,l,n,i,!0,!0),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.window.setLocation=function(e,t){var l=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;e=Math.max(0,Math.min(e,l-this.table.clientWidth)),t=Math.max(0,Math.min(t,n-this.table.clientHeight-48)),this.getX()==e&&this.getY()==t||mxWindow.prototype.setLocation.apply(this,arguments)},mxEvent.addListener(window,"resize",mxUtils.bind(this,function(){var e=this.window.getX(),t=this.window.getY();this.window.setLocation(e,t)}));var d=e.createOutline(this.window);this.window.addListener(mxEvent.RESIZE,mxUtils.bind(this,function(){d.update(!1),d.outline.sizeDidChange()})),this.window.addListener(mxEvent.SHOW,mxUtils.bind(this,function(){d.suspended=!1,d.outline.refresh(),d.update()})),this.window.addListener(mxEvent.HIDE,mxUtils.bind(this,function(){d.suspended=!0})),this.window.addListener(mxEvent.NORMALIZE,mxUtils.bind(this,function(){d.suspended=!1,d.update()})),this.window.addListener(mxEvent.MINIMIZE,mxUtils.bind(this,function(){d.suspended=!0}));var s=d.createGraph;if(d.createGraph=function(e){var t=s.apply(this,arguments);t.gridEnabled=!1,t.pageScale=o.pageScale,t.pageFormat=o.pageFormat,t.background=o.background,t.pageVisible=o.pageVisible;var l=mxUtils.getCurrentStyle(o.container);return r.style.backgroundColor=l.backgroundColor,t},d.init(r),e.editor.addListener("resetGraphView",a),e.addListener("pageFormatChanged",a),e.addListener("backgroundColorChanged",a),e.addListener("backgroundImageChanged",a),e.addListener("pageViewChanged",function(){a(),d.update(!0)}),d.outline.dialect==mxConstants.DIALECT_SVG){var c=e.actions.get("zoomIn"),u=e.actions.get("zoomOut");mxEvent.addMouseWheelListener(function(e,t){for(var l=!1,n=mxEvent.getSource(e);null!=n;){if(n==d.outline.view.canvas.ownerSVGElement){l=!0;break}n=n.parentNode}l&&(t?c.funct():u.funct(),mxEvent.consume(e))})}},LayersWindow=function(e,t,l,n,i){function a(t){if(r.isEnabled()&&null!=t){var l=new FilenameDialog(e,t.value||mxResources.get("background"),mxResources.get("rename"),mxUtils.bind(this,function(e){null!=e&&r.getModel().setValue(t,e)}),mxResources.get("enterName"));e.showDialog(l.container,300,100,!0,!0),l.init()}}function o(){function e(e,t,l,n){var i=document.createElement("div");i.className="geToolbarContainer",i.style.overflow="hidden",i.style.position="relative",i.style.padding="4px",i.style.height="22px",i.style.display="block",i.style.backgroundColor="whiteSmoke",i.style.borderWidth="0px 0px 1px 0px",i.style.borderColor="#c3c3c3",i.style.borderStyle="solid",i.style.whiteSpace="nowrap";var d=document.createElement("div");d.style.display="inline-block",d.style.width="100%",d.style.textOverflow="ellipsis",d.style.overflow="hidden",mxEvent.addListener(i,"dragover",function(t){t.dataTransfer.dropEffect="move",p=e,t.stopPropagation(),t.preventDefault()}),mxEvent.addListener(i,"dragstart",function(e){u=i,mxClient.IS_FF&&e.dataTransfer.setData("Text","<layer/>")}),mxEvent.addListener(i,"dragend",function(e){null!=u&&null!=p&&r.addCell(l,r.model.root,p),u=null,p=null,e.stopPropagation(),e.preventDefault()});var s=document.createElement("img");s.setAttribute("draggable","false"),s.setAttribute("align","top"),s.setAttribute("border","0"),s.style.cursor="pointer",s.style.padding="4px",s.setAttribute("title",mxResources.get("lockUnlock"));var h=r.view.getState(l),x=null!=h?h.style:r.getCellStyle(l);"1"==mxUtils.getValue(x,"locked","0")?s.setAttribute("src",Dialog.prototype.lockedImage):s.setAttribute("src",Dialog.prototype.unlockedImage),mxEvent.addListener(s,"click",function(e){if(r.isEnabled()){var t=null;r.getModel().beginUpdate();try{t="1"==mxUtils.getValue(x,"locked","0")?null:"1",r.setCellStyles("locked",t,[l])}finally{r.getModel().endUpdate()}"1"==t&&r.removeSelectionCells(r.getModel().getDescendants(l)),mxEvent.consume(e)}}),d.appendChild(s);var v=document.createElement("input");if(v.setAttribute("type","checkbox"),v.setAttribute("title",mxResources.get("hideIt",[l.value||mxResources.get("background")])),v.style.marginLeft="4px",v.style.marginRight="6px",v.style.marginTop="4px",d.appendChild(v),r.isEnabled()||v.setAttribute("disabled","disabled"),r.model.isVisible(l)&&(v.setAttribute("checked","checked"),v.defaultChecked=!0),mxEvent.addListener(v,"click",function(e){r.isEnabled()&&(r.model.setVisible(l,!r.model.isVisible(l)),mxEvent.consume(e))}),mxUtils.write(d,t),i.appendChild(d),r.isEnabled()){if(mxClient.IS_TOUCH||mxClient.IS_POINTER||mxClient.IS_VML||mxClient.IS_IE&&document.documentMode<10){var C=document.createElement("div");if(C.style.display="block",C.style.textAlign="right",C.style.whiteSpace="nowrap",C.style.position="absolute",C.style.right="6px",C.style.top="6px",e>0){var b=document.createElement("a");b.setAttribute("title",mxResources.get("toBack")),b.className="geButton",b.style.cssFloat="none",b.innerHTML="&#9660;",b.style.width="14px",b.style.height="14px",b.style.fontSize="14px",b.style.margin="0px",b.style.marginTop="-1px",C.appendChild(b),mxEvent.addListener(b,"click",function(t){r.isEnabled()&&r.addCell(l,r.model.root,e-1),mxEvent.consume(t)})}if(e>=0&&e<m-1){var y=document.createElement("a");y.setAttribute("title",mxResources.get("toFront")),y.className="geButton",y.style.cssFloat="none",y.innerHTML="&#9650;",y.style.width="14px",y.style.height="14px",y.style.fontSize="14px",y.style.margin="0px",y.style.marginTop="-1px",C.appendChild(y),mxEvent.addListener(y,"click",function(t){r.isEnabled()&&r.addCell(l,r.model.root,e+1),mxEvent.consume(t)})}i.appendChild(C)}mxClient.IS_SVG&&(!mxClient.IS_IE||document.documentMode>=10)&&(i.setAttribute("draggable","true"),i.style.cursor="move")}mxEvent.addListener(i,"dblclick",function(e){var t=mxEvent.getSource(e).nodeName;"INPUT"!=t&&"IMG"!=t&&(a(l),mxEvent.consume(e))}),r.getDefaultParent()==l?(i.style.background="#e6eff8",i.style.fontWeight="bold",g=l):mxEvent.addListener(i,"click",function(e){r.isEnabled()&&(r.setDefaultParent(n),r.view.setCurrentRoot(null),o())}),c.appendChild(i)}m=r.model.getChildCount(r.model.root),c.innerHTML="";for(var t=m-1;t>=0;t--)mxUtils.bind(this,function(l){e(t,l.value||mxResources.get("background"),l,l)})(r.model.getChildAt(r.model.root,t));v.setAttribute("title",mxResources.get("removeIt",[g.value||mxResources.get("background")])),C.setAttribute("title",mxResources.get("moveSelectionTo",[g.value||mxResources.get("background")])),y.setAttribute("title",mxResources.get("duplicateIt",[g.value||mxResources.get("background")])),b.setAttribute("title",mxResources.get("renameIt",[g.value||mxResources.get("background")])),r.isSelectionEmpty()&&(C.className="geButton mxDisabled")}var r=e.editor.graph,d=document.createElement("div");d.style.userSelect="none",d.style.background="whiteSmoke",d.style.border="1px solid whiteSmoke",d.style.height="100%",d.style.marginBottom="10px",d.style.overflow="auto";var s=EditorUi.compactUi?"26px":"30px",c=document.createElement("div");c.style.backgroundColor="#e5e5e5",c.style.position="absolute",c.style.overflow="auto",c.style.left="0px",c.style.right="0px",c.style.top="0px",c.style.bottom=parseInt(s)+7+"px",d.appendChild(c);var u=null,p=null;mxEvent.addListener(d,"dragover",function(e){e.dataTransfer.dropEffect="move",p=0,e.stopPropagation(),e.preventDefault()}),mxEvent.addListener(d,"drop",function(e){e.stopPropagation(),e.preventDefault()});var m=null,g=null,h=document.createElement("div");h.className="geToolbarContainer",h.style.position="absolute",h.style.bottom="0px",h.style.left="0px",h.style.right="0px",h.style.height=s,h.style.overflow="hidden",h.style.padding=EditorUi.compactUi?"4px 0px 3px 0px":"1px",h.style.backgroundColor="whiteSmoke",h.style.borderWidth="1px 0px 0px 0px",h.style.borderColor="#c3c3c3",h.style.borderStyle="solid",h.style.display="block",h.style.whiteSpace="nowrap",mxClient.IS_QUIRKS&&(h.style.filter="none");var x=document.createElement("a");x.className="geButton",mxClient.IS_QUIRKS&&(x.style.filter="none");var v=x.cloneNode();v.innerHTML='<div class="geSprite geSprite-delete" style="display:inline-block;"></div>',mxEvent.addListener(v,"click",function(e){if(r.isEnabled()){r.model.beginUpdate();try{var t=r.model.root.getIndex(g);r.removeCells([g],!1),0==r.model.getChildCount(r.model.root)?(r.model.add(r.model.root,new mxCell),r.setDefaultParent(null)):t>0&&t<=r.model.getChildCount(r.model.root)?r.setDefaultParent(r.model.getChildAt(r.model.root,t-1)):r.setDefaultParent(null)}finally{r.model.endUpdate()}}mxEvent.consume(e)}),r.isEnabled()||(v.className="geButton mxDisabled"),h.appendChild(v);var C=x.cloneNode();C.innerHTML='<div class="geSprite geSprite-insert" style="display:inline-block;"></div>',mxEvent.addListener(C,"click",function(e){r.isEnabled()&&!r.isSelectionEmpty()&&r.moveCells(r.getSelectionCells(),0,0,!1,g)}),h.appendChild(C);var b=x.cloneNode();b.innerHTML='<div class="geSprite geSprite-dots" style="display:inline-block;"></div>',b.setAttribute("title",mxResources.get("rename")),mxEvent.addListener(b,"click",function(e){r.isEnabled()&&a(g),mxEvent.consume(e)}),r.isEnabled()||(b.className="geButton mxDisabled"),h.appendChild(b);var y=x.cloneNode();y.innerHTML='<div class="geSprite geSprite-duplicate" style="display:inline-block;"></div>',mxEvent.addListener(y,"click",function(e){if(r.isEnabled()){var t=null;r.model.beginUpdate();try{(t=r.cloneCells([g])[0]).value=mxResources.get("untitledLayer"),t.setVisible(!0),t=r.addCell(t,r.model.root),r.setDefaultParent(t)}finally{r.model.endUpdate()}null==t||r.isCellLocked(t)||r.selectAll(t)}}),r.isEnabled()||(y.className="geButton mxDisabled"),h.appendChild(y);var f=x.cloneNode();f.innerHTML='<div class="geSprite geSprite-plus" style="display:inline-block;"></div>',f.setAttribute("title",mxResources.get("addLayer")),mxEvent.addListener(f,"click",function(e){if(r.isEnabled()){r.model.beginUpdate();try{var t=r.addCell(new mxCell(mxResources.get("untitledLayer")),r.model.root);r.setDefaultParent(t)}finally{r.model.endUpdate()}}mxEvent.consume(e)}),r.isEnabled()||(f.className="geButton mxDisabled"),h.appendChild(f),d.appendChild(h),o(),r.model.addListener(mxEvent.CHANGE,function(){o()}),r.selectionModel.addListener(mxEvent.CHANGE,function(){r.isSelectionEmpty()?C.className="geButton mxDisabled":C.className="geButton"}),this.window=new mxWindow(mxResources.get("layers"),d,t,l,n,i,!0,!0),this.window.destroyOnClose=!1,this.window.setMaximizable(!1),this.window.setResizable(!0),this.window.setClosable(!0),this.window.setVisible(!0),this.refreshLayers=o,this.window.setLocation=function(e,t){var l=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;e=Math.max(0,Math.min(e,l-this.table.clientWidth)),t=Math.max(0,Math.min(t,n-this.table.clientHeight-48)),this.getX()==e&&this.getY()==t||mxWindow.prototype.setLocation.apply(this,arguments)},mxEvent.addListener(window,"resize",mxUtils.bind(this,function(){var e=this.window.getX(),t=this.window.getY();this.window.setLocation(e,t)}))};