/* 2017-11-21 */
Editor.prototype.extractGraphModel=function(e,t){if(null!=e&&"undefined"!=typeof pako){var l=[];if(null!=(g=e.ownerDocument.getElementsByTagName("div"))&&g.length>0)for(var n=0;n<g.length;n++)if("mxgraph"==g[n].getAttribute("class")){l.push(g[n]);break}if(l.length>0)if(null!=(r=l[0].getAttribute("data-mxgraph"))){var a=JSON.parse(r);null!=a&&null!=a.xml&&(e=(i=mxUtils.parseXml(a.xml)).documentElement)}else{var m=l[0].getElementsByTagName("div");if(m.length>0){var r=mxUtils.getTextContent(m[0]);if((r=this.graph.decompress(r)).length>0){var i=mxUtils.parseXml(r);e=i.documentElement}}}}if(null!=e&&"svg"==e.nodeName){if(null!=(g=e.getAttribute("content"))&&"<"!=g.charAt(0)&&"%"!=g.charAt(0)&&(g=unescape(window.atob?atob(g):Base64.decode(cont,g))),null!=g&&"%"==g.charAt(0)&&(g=decodeURIComponent(g)),!(null!=g&&g.length>0))throw{message:mxResources.get("notADiagramFile")};e=mxUtils.parseXml(g).documentElement}if(null!=e&&!t){var o=null;if("diagram"==e.nodeName)o=e;else if("mxfile"==e.nodeName){var s=e.getElementsByTagName("diagram");s.length>0&&(o=s[Math.max(0,Math.min(s.length-1,urlParams.page||0))])}if(null!=o){var g=this.graph.decompress(mxUtils.getTextContent(o));null!=g&&g.length>0&&(e=mxUtils.parseXml(g).documentElement)}}return null==e||"mxGraphModel"==e.nodeName||t&&"mxfile"==e.nodeName||(e=null),e};